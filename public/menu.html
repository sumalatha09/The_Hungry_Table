<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/menu.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu | RESTAURANT</title> 
</head>
<body>
    <!-- Navbar -->
    <nav>
        <div class="nav1">
            <a href="index.html">Home</a>
            <a href="menu.html">Menu</a>
            <a href="reservation.html">Reservation</a>
        </div>
        <div class="nav2">
            <div class="search">
                <input type="text" placeholder="Search">
                <i class="fa-solid fa-magnifying-glass"></i>
            </div>
            <div class="user">
                <a href="login.html">
                    <i class="fa-solid fa-user"></i>
                    <span>User</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Menu Section -->
    <div class="menu">
        <h1>Our Delicious Food</h1>
        <div class="menu-box">

            <!-- Example Food Item -->
            <div class="menu-card" data-name="Idly" data-price="50">
                <img src="../images/img4.jpg" alt="">
                <h4>Idly</h4>
                <p>Plate of 4 Idly Serves-1</p>
                <span>50 Rs</span>
                <button class="add-to-cart">Add to Cart</button>
            </div>

            <div class="menu-card" data-name="Dosa" data-price="50">
                <img src="../images/img3.jpg" alt="">
                <h4>Dosa</h4>
                <p>Plate of 1 Dosa Serves-1</p>
                <span>50 Rs</span>
                <button class="add-to-cart">Add to Cart</button>
            </div>

            <div class="menu-card" data-name="Puri" data-price="75">
                <img src="../images/img5.jpg" alt="">
                <h4>Puri</h4>
                <p>Plate of 2 Puri Serves-1</p>
                <span>75 Rs</span>
                <button class="add-to-cart">Add to Cart</button>
            </div>

            <div class="menu-card" data-name="Veg Thali" data-price="150">
                <img src="../images/img6.jpeg" alt="">
                <h4>Veg Thali</h4>
                <p>Rice, Dal, Fry, Curry, Curd, Sweet</p>
                <span>150 Rs</span>
                <button class="add-to-cart">Add to Cart</button>
            </div>

            <div class="menu-card" data-name="Veg Biryani" data-price="160">
                <img src="../images/img17.jpeg" alt="">
                <h4>Veg Biryani</h4>
                <p>Serves-1</p>
                <span>160 Rs</span>
                <button class="add-to-cart">Add to Cart</button>
            </div>

            <div class="menu-card" data-name="Fry Piece Biryani" data-price="280">
                <img src="../images/img18.jpeg" alt="">
                <h4>Fry Piece Biryani</h4>
                <p>Serves-1</p>
                <span>280 Rs</span>
                <button class="add-to-cart">Add to Cart</button>
            </div>

            <div class="menu-card" data-name="Chicken Biryani" data-price="250">
                <img src="../images/img7.jpeg" alt="">
                <h4>Chicken Biryani</h4>
                <p>Serves-1</p>
                <span>250 Rs</span>
                <button class="add-to-cart">Add to Cart</button>
            </div>

            <div class="menu-card" data-name="Mutton Biryani" data-price="350">
                <img src="../images/img23.jpeg" alt="">
                <h4>Mutton Biryani</h4>
                <p>Serves-2</p>
                <span>350 Rs</span>
                <button class="add-to-cart">Add to Cart</button>
            </div>

            <div class="menu-card" data-name="Noodles" data-price="80">
                <img src="../images/img8.jpeg" alt="">
                <h4>Noodles</h4>
                <p>Serves-1</p>
                <span>80 Rs</span>
                <button class="add-to-cart">Add to Cart</button>
            </div>

            <div class="menu-card" data-name="Gobi Manchurian" data-price="80">
                <img src="../images/img16.jpeg" alt="">
                <h4>Gobi Manchurian</h4>
                <p>Serves-1</p>
                <span>80 Rs</span>
                <button class="add-to-cart">Add to Cart</button>
            </div>

            <div class="menu-card" data-name="Coffee" data-price="40">
                <img src="../images/img9.jpeg" alt="">
                <h4>Coffee</h4>
                <p>Serves-1</p>
                <span>40 Rs</span>
                <button class="add-to-cart">Add to Cart</button>
            </div>

            <div class="menu-card" data-name="Special Tea" data-price="45">
                <img src="../images/img20.jpeg" alt="">
                <h4>Special Tea</h4>
                <p>Serves-1</p>
                <span>45 Rs</span>
                <button class="add-to-cart">Add to Cart</button>
            </div>

            <div class="menu-card" data-name="Hot Badam Milk" data-price="65">
                <img src="../images/img21.jpeg" alt="">
                <h4>Hot Badam Milk</h4>
                <p>Serves-1</p>
                <span>65 Rs</span>
                <button class="add-to-cart">Add to Cart</button>
            </div>

            <div class="menu-card" data-name="Special Rabdi" data-price="110">
                <img src="../images/img22.jpeg" alt="">
                <h4>Special Rabdi</h4>
                <p>Serves-1</p>
                <span>110 Rs</span>
                <button class="add-to-cart">Add to Cart</button>
            </div>

            <div class="menu-card" data-name="Pizza" data-price="280">
                <img src="../images/img19.jpg" alt="">
                <h4>Pizza</h4>
                <p>Serves-4</p>
                <span>280 Rs</span>
                <button class="add-to-cart">Add to Cart</button>
            </div>

        </div>
    </div>
    <div id="cart-sidebar">
        <h2>Your Cart</h2>
        <ul id="cart-items"></ul>
        <p><strong>Total:</strong> â‚¹<span id="cart-total">0</span></p>
        <button id="checkout-button">Proceed to Checkout</button>
    </div>

    <!-- ðŸ§¾ Checkout Modal -->
    <div id="checkout-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Place Your Order</h2>
            <form id="order-form">
                <input type="text" id="name" placeholder="Your Name" required>
                <input type="email" id="email" placeholder="Your Email" required>
                <input type="tel" id="phone" placeholder="Your Phone Number" required>
                <button type="submit">Submit Order</button>
            </form>
        </div>
    </div>

    <!-- Footer Section -->
    <div class="sec6">
        <div>
            <img src="../images/official_logo_text_bl.png" alt="">
            <p>RESTAURANT</p>
        </div>
        <div>
            <ul>
                <li>Main Menu</li>
                <li><a href="#">About</a></li>
                <li><a href="#">Menu</a></li>
                <li><a href="#">Events</a></li>
                <li><a href="#">Offers</a></li>
            </ul>
        </div>
        <div>
            <ul>
                <li>Information</li>
                <li><a href="#">Contact</a></li>
                <li><a href="#">Order & Returns</a></li>
                <li><a href="#">Videos</a></li>
                <li><a href="#">Reservation</a></li>
            </ul>
        </div>
        <div>
            <ul>
                <li>Address</li>
                <p>Guntur, Andhra Pradesh, India</p>
                <p>9:00 AM - 11:00 PM</p>
            </ul>
        </div>
    </div>

    <div class="footer">
        <p>Copyright &copy;2024 RESTAURANT | All Rights Reserved</p>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const cart = [];
            const cartItemsEl = document.getElementById("cart-items");
            const cartTotalEl = document.getElementById("cart-total");
            const modal = document.getElementById("checkout-modal");
            const closeModalBtn = document.querySelector(".close");
            const checkoutBtn = document.getElementById("checkout-button");
            const orderForm = document.getElementById("order-form");
        
            // Add items to cart
            document.querySelectorAll(".add-to-cart").forEach(button => {
                button.addEventListener("click", () => {
                    const card = button.closest(".menu-card");
                    const name = card.dataset.name;
                    const price = parseInt(card.dataset.price);
        
                    const existingItem = cart.find(item => item.name === name);
                    if (existingItem) {
                        existingItem.quantity += 1;
                    } else {
                        cart.push({ name, price, quantity: 1 });
                    }
                    updateCartUI();
                });
            });
        
            // Update cart UI
            function updateCartUI() {
                cartItemsEl.innerHTML = "";
                let total = 0;
                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;
                    const li = document.createElement("li");
                    li.textContent = `${item.name} x${item.quantity} - â‚¹${itemTotal}`;
                    cartItemsEl.appendChild(li);
                });
                cartTotalEl.textContent = total;
            }
        
            // Show modal
            checkoutBtn.addEventListener("click", () => {
                if (cart.length === 0) {
                    alert("Cart is empty!");
                    return;
                }
                modal.style.display = "block";
            });
        
            // Close modal
            closeModalBtn.addEventListener("click", () => {
                modal.style.display = "none";
            });
            window.addEventListener("click", (e) => {
                if (e.target === modal) {
                    modal.style.display = "none";
                }
            });
        
            // Submit order
            orderForm.addEventListener("submit", async (e) => {
                e.preventDefault();
        
                const name = document.getElementById("name").value.trim();
                const email = document.getElementById("email").value.trim();
                const phone = document.getElementById("phone").value.trim();
        
                const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
        
                const orderData = {
                    name,
                    email,
                    phone,
                    items: cart,
                    total
                };
        
                try {
                    const response = await fetch("/api/orders", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify(orderData)
                    });
        
                    const result = await response.json();
        
                    if (response.ok) {
                        alert(result.message || "Order placed successfully!");
                        modal.style.display = "none";
                        cart.length = 0;
                        updateCartUI();
                        orderForm.reset();
                    } else {
                        alert("Error placing order: " + (result.message || "Try again."));
                    }
                } catch (err) {
                    console.error("Order submission error:", err);
                    alert("Failed to place order. Server error.");
                }
            });
        });
        const isLoggedIn = localStorage.getItem("userLoggedIn");

if (!isLoggedIn || isLoggedIn !== "true") {
  alert("Please login to access this page.");
  window.location.href = "login.html";
}
        </script>
           
</body>
</html>